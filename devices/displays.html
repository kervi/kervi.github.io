

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Displays</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="" href="../index.html"/>
        <link rel="up" title="Device library" href="index.html"/>
        <link rel="next" title="GPIO" href="gpio.html"/>
        <link rel="prev" title="Device library" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Kervi
          

          
          </a>

          
            
            
              <div class="version">
                0.20.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getstarted/index.html">Get started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dashboards.html">Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sensors.html">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../signals.html">Signal handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../actions.html">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../camera.html">Camera and video</a></li>
<li class="toctree-l1"><a class="reference internal" href="../motors.html">Motors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpio.html">GPIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../display.html">Displays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../messaging.html">Messaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hal.html">Hardware and devices</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Device library</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Displays</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ssd1306-i2c">SSD1306(I2C)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hd44780-i2c-pcf8574">HD44780(I2C, PCF8574)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hd44780-i2c-mcp23017">HD44780(I2C, MCP23017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hd44780">HD44780</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="gpio.html">GPIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="motors.html">Motors</a></li>
<li class="toctree-l2"><a class="reference internal" href="pwm.html">PWM</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html">Sensors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../multi_process.html">Process distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../distributed.html">Distributed applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../service.html">Run as service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Commandline tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ipc.html">Interprocess communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kervi_api.html">Kervi API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Kervi</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Device library</a> &raquo;</li>
        
      <li>Displays</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="displays">
<h1>Displays<a class="headerlink" href="#displays" title="Permalink to this headline">¶</a></h1>
<p>This section shows how to initialize and link displays in the kervi device library.
All samples links to a text box in the ui where it is possible to enter the text that
should be displayed.</p>
<p>See <a class="reference internal" href="../display.html#device-displays"><span class="std std-ref">Displays</span></a> for further details on display programming.</p>
<div class="section" id="ssd1306-i2c">
<h2>SSD1306(I2C)<a class="headerlink" href="#ssd1306-i2c" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kervi.devices.displays.SSD1306</span> <span class="k">import</span> <span class="n">SSD1306DeviceDriver</span>
<span class="n">SSD1306DeviceDriver</span><span class="p">(</span>
    <span class="n">height</span><span class="p">,</span>
    <span class="n">width</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span>
    <span class="n">rst</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">i2c_bus</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">i2c_address</span><span class="o">=</span><span class="n">SSD1306_I2C_ADDRESS</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">height:</th><td class="field-body">Height of display.</td>
</tr>
<tr class="field-even field"><th class="field-name">width:</th><td class="field-body">Width of display.</td>
</tr>
<tr class="field-odd field"><th class="field-name">rst:</th><td class="field-body">gpio to use as as hardware reset.</td>
</tr>
<tr class="field-even field"><th class="field-name">i2c_bus:</th><td class="field-body">I2C bus. If 0 or None default bus for platform is selected.</td>
</tr>
<tr class="field-odd field"><th class="field-name">i2c_address:</th><td class="field-body">I2C address. Default is 0x3C.</td>
</tr>
</tbody>
</table>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kervi.application</span> <span class="k">import</span> <span class="n">Application</span>
<span class="n">APP</span> <span class="o">=</span> <span class="n">Application</span><span class="p">()</span>

<span class="kn">from</span> <span class="nn">kervi.displays</span> <span class="k">import</span> <span class="n">Display</span>
<span class="kn">from</span> <span class="nn">kervi.devices.displays.SSD1306</span> <span class="k">import</span> <span class="n">SSD1306DeviceDriver</span>
<span class="n">display</span> <span class="o">=</span> <span class="n">Display</span><span class="p">(</span><span class="s2">&quot;d_1&quot;</span><span class="p">,</span> <span class="s2">&quot;Display&quot;</span><span class="p">,</span> <span class="n">SSD1306DeviceDriver</span><span class="p">(</span><span class="mi">32</span><span class="p">))</span>
<span class="n">display</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>
<span class="n">display</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">link_to_dashboard</span><span class="p">()</span>

<span class="n">APP</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="hd44780-i2c-pcf8574">
<h2>HD44780(I2C, PCF8574)<a class="headerlink" href="#hd44780-i2c-pcf8574" title="Permalink to this headline">¶</a></h2>
<p>This device driver supports HD44780 displays that are controlled via the PCF8574 gpio i2c chip.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kervi.devices.displays.HD44780_PCF8574</span> <span class="k">import</span> <span class="n">HD44780_PCF8574_DeviceDriver</span>
<span class="n">HD44780_PCF8574_DeviceDriver</span><span class="p">(</span>
    <span class="n">pin_map</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">cols</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="n">lines</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">address</span><span class="o">=</span><span class="mh">0x3f</span><span class="p">,</span>
    <span class="n">busnum</span><span class="o">=</span><span class="mi">0</span>
<span class="p">):</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">pin_map:</th><td class="field-body">There are several products that uses PCF8574 to control the display but have different pin setup.
To handle this situation the driver has different pin_maps to use.
Use values 0-3.</td>
</tr>
<tr class="field-even field"><th class="field-name">cols:</th><td class="field-body">Number of characters in a line.</td>
</tr>
<tr class="field-odd field"><th class="field-name">lines:</th><td class="field-body">Number of lines.</td>
</tr>
<tr class="field-even field"><th class="field-name">address:</th><td class="field-body">I2C address. Default is 0x3C.</td>
</tr>
<tr class="field-odd field"><th class="field-name">bus:</th><td class="field-body">I2C bus. If 0 or None default bus for platform is selected.</td>
</tr>
</tbody>
</table>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kervi.application</span> <span class="k">import</span> <span class="n">Application</span>
<span class="n">APP</span> <span class="o">=</span> <span class="n">Application</span><span class="p">()</span>

<span class="kn">from</span> <span class="nn">kervi.displays</span> <span class="k">import</span> <span class="n">Display</span>
<span class="kn">from</span> <span class="nn">kervi.devices.displays.HD44780_PCF8574</span> <span class="k">import</span> <span class="n">HD44780_PCF8574_DeviceDriver</span>
<span class="n">display</span> <span class="o">=</span> <span class="n">Display</span><span class="p">(</span><span class="s2">&quot;d_1&quot;</span><span class="p">,</span> <span class="s2">&quot;Display&quot;</span><span class="p">,</span> <span class="n">HD44780_PCF8574_DeviceDriver</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="n">display</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>
<span class="n">display</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">link_to_dashboard</span><span class="p">()</span>

<span class="n">APP</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="hd44780-i2c-mcp23017">
<h2>HD44780(I2C, MCP23017)<a class="headerlink" href="#hd44780-i2c-mcp23017" title="Permalink to this headline">¶</a></h2>
<p>This device driver supports HD44780 displays that are controlled via the MCP23017 gpio i2c chip.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kervi.devices.displays.HD44780_MCP23017</span> <span class="k">import</span> <span class="n">HD44780_MCP23017_DeviceDriver</span>
<span class="n">HD44780_MCP23017_DeviceDriver</span><span class="p">(</span>
    <span class="n">cols</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="n">lines</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">address</span><span class="o">=</span><span class="mh">0x20</span><span class="p">,</span>
    <span class="n">busnum</span><span class="o">=</span><span class="mi">0</span>
<span class="p">):</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">cols:</th><td class="field-body">Number of characters in a line.</td>
</tr>
<tr class="field-even field"><th class="field-name">lines:</th><td class="field-body">Number of lines.</td>
</tr>
<tr class="field-odd field"><th class="field-name">address:</th><td class="field-body">I2C address. Default is 0x20.</td>
</tr>
<tr class="field-even field"><th class="field-name">bus:</th><td class="field-body">I2C bus. If 0 or None default bus for platform is selected.</td>
</tr>
</tbody>
</table>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kervi.application</span> <span class="k">import</span> <span class="n">Application</span>
<span class="n">APP</span> <span class="o">=</span> <span class="n">Application</span><span class="p">()</span>

<span class="kn">from</span> <span class="nn">kervi.displays</span> <span class="k">import</span> <span class="n">Display</span>
<span class="kn">from</span> <span class="nn">kervi.devices.displays.HD44780_MCP23017</span> <span class="k">import</span> <span class="n">HD44780_MCP23017_DeviceDriver</span>
<span class="n">display</span> <span class="o">=</span> <span class="n">Display</span><span class="p">(</span><span class="s2">&quot;d_1&quot;</span><span class="p">,</span> <span class="s2">&quot;Display&quot;</span><span class="p">,</span> <span class="n">HD44780_MCP23017_DeviceDriver</span><span class="p">())</span>
<span class="n">display</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>
<span class="n">display</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">link_to_dashboard</span><span class="p">()</span>

<span class="n">APP</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="hd44780">
<h2>HD44780<a class="headerlink" href="#hd44780" title="Permalink to this headline">¶</a></h2>
<p>This device driver supports HD44780 displays that is controlled via gpio.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kervi.devices.displays.HD44780_MCP23017</span> <span class="k">import</span> <span class="n">HD44780_MCP23017_DeviceDriver</span>
<span class="n">HD44780DeviceDriver</span><span class="p">(</span>
    <span class="n">rs</span><span class="p">,</span> <span class="n">en</span><span class="p">,</span>
    <span class="n">d4</span><span class="p">,</span> <span class="n">d5</span><span class="p">,</span> <span class="n">d6</span><span class="p">,</span> <span class="n">d7</span><span class="p">,</span>
    <span class="n">cols</span><span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
    <span class="n">lines</span><span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">backlight</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">invert_polarity</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">enable_pwm</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">initial_backlight</span><span class="o">=</span><span class="mf">1.0</span>
<span class="p">):</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">rs, en, d4, d5, d6, d7:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">RS, EN, and D4…D7 parameters should be the pins
connected to the LCD RS, clock enable, and data line 4 through 7 connections.
The LCD will be used in its 4-bit mode so these 6 lines are the only ones
required to use the LCD.</td>
</tr>
<tr class="field-even field"><th class="field-name">cols:</th><td class="field-body">Number of columns in the display</td>
</tr>
<tr class="field-odd field"><th class="field-name">lines:</th><td class="field-body">Number of lines in the display.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">backlight, invert_polarity:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">If you would like to control the backlight, pass in the pin connected to
the backlight with the backlight parameter.  The invert_polarity boolean
controls if the backlight is one with a LOW signal or HIGH signal.  The
default invert_polarity value is True, i.e. the backlight is on with a
LOW signal.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">enable_pwm, initial_backlight:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">You can enable PWM of the backlight pin to have finer control on the
brightness.  To enable PWM make sure your hardware supports PWM on the
provided backlight pin and set enable_pwm to True (the default is False).
The appropriate PWM library will be used depending on the platform, but
you can provide an explicit one with the pwm parameter.
The initial state of the backlight is ON, but you can set it to an
explicit initial state with the initial_backlight parameter (0 is off,
1 is on/full bright).</td>
</tr>
</tbody>
</table>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kervi.application</span> <span class="k">import</span> <span class="n">Application</span>
<span class="n">APP</span> <span class="o">=</span> <span class="n">Application</span><span class="p">()</span>

<span class="kn">from</span> <span class="nn">kervi.hal.gpio</span> <span class="k">import</span> <span class="n">GPIO</span>
<span class="kn">from</span> <span class="nn">kervi.displays</span> <span class="k">import</span> <span class="n">Display</span>
<span class="kn">from</span> <span class="nn">kervi.devices.displays.HD44780_MCP23017</span> <span class="k">import</span> <span class="n">HD44780_MCP23017_DeviceDriver</span>

<span class="n">display</span> <span class="o">=</span> <span class="n">Display</span><span class="p">(</span>
    <span class="s2">&quot;d_1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Display&quot;</span><span class="p">,</span>
    <span class="n">HD44780DeviceDriver</span><span class="p">(</span>
        <span class="n">GPIO</span><span class="p">[</span><span class="mi">15</span><span class="p">],</span> <span class="n">GPIO</span><span class="p">[</span><span class="mi">14</span><span class="p">],</span> <span class="n">GPIO</span><span class="p">[</span><span class="mi">13</span><span class="p">],</span> <span class="n">GPIO</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span>
        <span class="n">GPIO</span><span class="p">[</span><span class="mi">13</span><span class="p">],</span> <span class="n">GPIO</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="n">GPIO</span><span class="p">[</span><span class="mi">11</span><span class="p">],</span> <span class="n">GPIO</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
    <span class="p">))</span>
<span class="n">display</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>
<span class="n">display</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">link_to_dashboard</span><span class="p">()</span>

<span class="n">APP</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gpio.html" class="btn btn-neutral float-right" title="GPIO" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Device library" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Tim Wentzlau.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>