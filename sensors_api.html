

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sensors API</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Display api" href="display_api.html" />
    <link rel="prev" title="Kervi values api" href="values_api.html" />
<script type="text/javascript" src="https://www.PrivacyPolicies.com/cookie-consent/releases/3.0.0/cookie-consent.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Kervi
          

          
          </a>

          
            
            
              <div class="version">
                0.20.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getstarted/index.html">Get started</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboards.html">Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensors.html">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="signals.html">Signal handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="actions.html">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="camera.html">Camera and video</a></li>
<li class="toctree-l1"><a class="reference internal" href="motors.html">Motors</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpio.html">GPIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="display.html">Displays</a></li>
<li class="toctree-l1"><a class="reference internal" href="messaging.html">Messaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="hal.html">Hardware and devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="devices/index.html">Device library</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_process.html">Process distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributed.html">Distributed applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="service.html">Run as service</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Commandline tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipc.html">Interprocess communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins/index.html">Plugins</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="kervi_api.html">Kervi API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dashboards_api.html">Dashboards api</a></li>
<li class="toctree-l2"><a class="reference internal" href="camera_api.html">Camera api</a></li>
<li class="toctree-l2"><a class="reference internal" href="controllers_api.html">Controllers api</a></li>
<li class="toctree-l2"><a class="reference internal" href="values_api.html">Kervi values api</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Sensors API</a></li>
<li class="toctree-l2"><a class="reference internal" href="display_api.html">Display api</a></li>
<li class="toctree-l2"><a class="reference internal" href="hal_gpio_api.html">GPIO API</a></li>
<li class="toctree-l2"><a class="reference internal" href="hal_i2c_api.html">I2C API</a></li>
<li class="toctree-l2"><a class="reference internal" href="hal_devices_api.html">Devices API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Kervi</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="kervi_api.html">Kervi API</a> &raquo;</li>
        
      <li>Sensors API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-kervi.sensors">
<span id="sensors-api"></span><h1>Sensors API<a class="headerlink" href="#module-kervi.sensors" title="Permalink to this headline">¶</a></h1>
<p>Sensor handling in Kervi is split in two parts. 
The first part is sensor device drivers that handles physical access to sensor hardware.
The second part is the Sensor class that reads a sensor device and triggers events, store readings to DB.</p>
<dl class="class">
<dt id="kervi.sensors.Sensor">
<em class="property">class </em><code class="sig-prename descclassname">kervi.sensors.</code><code class="sig-name descname">Sensor</code><span class="sig-paren">(</span><em class="sig-param">sensor_id</em>, <em class="sig-param">name</em>, <em class="sig-param">device=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#kervi.sensors.Sensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Sensor is a class that exposes a sensor device as a KerviValue.
The Sensor class polls the associated sensor device and updates it self when
the value of the sensor device change.</p>
<p>It is possible to link to other KerviValues and dashboards.</p>
<p>Some sensor devices are multi dimensional and each dimension are reached by a numeric index of the sensor it self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sensor_id</strong> (<code class="docutils literal notranslate"><span class="pre">str</span></code>) – Id of the sensor. This id is never displayed it is used to reference the sensor in code.</p></li>
<li><p><strong>name</strong> (<code class="docutils literal notranslate"><span class="pre">str</span></code>) – Name of the sensor.</p></li>
<li><p><strong>device</strong> (<code class="docutils literal notranslate"><span class="pre">SensorDeviceDriver</span></code>) – The sensor device that should be monitored. Could be one of the sensors from the kervi device library
or a sensor device driver that inherits from kervi.hal.SensorDeviceDriver</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>polling_interval</strong> (<code class="docutils literal notranslate"><span class="pre">float</span></code>) –  Polling interval in seconds. Zero disables polling.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="kervi.sensors.Sensor.add_value_event">
<code class="sig-name descname">add_value_event</code><span class="sig-paren">(</span><em class="sig-param">event_value</em>, <em class="sig-param">func</em>, <em class="sig-param">event_type=None</em>, <em class="sig-param">parameters=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#kervi.sensors.Sensor.add_value_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a function that is called when the value reach or pass the event_value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_value</strong> (<code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">string</span></code>, <code class="docutils literal notranslate"><span class="pre">boolean</span></code> or a tuple of these types.) – <p>A single value or range specified as a tuple.</p>
<p>If it is a range the function specified in func is called when the value enters the range.</p>
</p></li>
<li><p><strong>func</strong> – Function or lambda expression to be called.
This function will receive the dynamcic value as a parameter.</p></li>
<li><p><strong>event_type</strong> (<code class="docutils literal notranslate"><span class="pre">str</span></code>) – String with the value “warning” of “error” or None (default).
If warning or error is specified the value or range are shown in UI.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kervi.sensors.Sensor.controller_start">
<code class="sig-name descname">controller_start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kervi.sensors.Sensor.controller_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract method that is called when the entire application is loaded.</p>
</dd></dl>

<dl class="method">
<dt id="kervi.sensors.Sensor.delta">
<em class="property">property </em><code class="sig-name descname">delta</code><a class="headerlink" href="#kervi.sensors.Sensor.delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Enter how much a the value should change before it triggers changes events and updates links.
:type: <code class="docutils literal notranslate"><span class="pre">float</span></code></p>
</dd></dl>

<dl class="method">
<dt id="kervi.sensors.Sensor.device">
<em class="property">property </em><code class="sig-name descname">device</code><a class="headerlink" href="#kervi.sensors.Sensor.device" title="Permalink to this definition">¶</a></dt>
<dd><p>The device that is linked to this sensor class.
It may be a hardware device from the kervi device library
or a class that inherits from kervi.hal.SensorDeviceDriver</p>
</dd></dl>

<dl class="method">
<dt id="kervi.sensors.Sensor.display_unit">
<em class="property">property </em><code class="sig-name descname">display_unit</code><a class="headerlink" href="#kervi.sensors.Sensor.display_unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Display unit of value.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kervi.sensors.Sensor.link_to_dashboard">
<code class="sig-name descname">link_to_dashboard</code><span class="sig-paren">(</span><em class="sig-param">dashboard_id=None</em>, <em class="sig-param">panel_id=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#kervi.sensors.Sensor.link_to_dashboard" title="Permalink to this definition">¶</a></dt>
<dd><p>Links the sensor to a dashboard.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dashboard_id</strong> (<code class="docutils literal notranslate"><span class="pre">str</span></code>) – Id of the dashboard to link to.
Enter a * if the sensor should be linked to all dashboards.</p></li>
<li><p><strong>panel_id</strong> (<code class="docutils literal notranslate"><span class="pre">str</span></code>) – Id of the panel to link to.
This is the id of a panel you have added your self to a dashboard or one of the
system panels <em>sys-header</em>, <em>header</em> or <em>footer</em></p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>link_to_header</strong> (<code class="docutils literal notranslate"><span class="pre">str</span></code>) – Link this input to header of the panel.</p></li>
<li><p><strong>label_icon</strong> (<code class="docutils literal notranslate"><span class="pre">str</span></code>) – Icon that should be displayed together with label. All Font Awesome icons are valid just enter the name of the icon without <em>fa-</em></p></li>
<li><p><strong>label</strong> (<code class="docutils literal notranslate"><span class="pre">str</span></code>) – Label text, default value is the name of the sensor.</p></li>
<li><p><strong>flat</strong> (<code class="docutils literal notranslate"><span class="pre">bool</span></code>) – Flat look and feel.</p></li>
<li><p><strong>inline</strong> (<code class="docutils literal notranslate"><span class="pre">bool</span></code>) – Display value, sparkline and label in its actual size otherwise it occupys the entire with of the panel</p></li>
<li><p><strong>type</strong> (<code class="docutils literal notranslate"><span class="pre">str</span></code>) – One of the following values <em>radial_gauge</em>, <em>vertical_gauge</em>, <em>horizontal_gauge</em>, <em>chart</em> or <em>value</em>.</p></li>
<li><p><strong>show_sparkline</strong> (<code class="docutils literal notranslate"><span class="pre">bool</span></code>) – Show a sparkline next to the value.</p></li>
<li><p><strong>icon</strong> (<code class="docutils literal notranslate"><span class="pre">bool</span></code>) – Icon to show. All Font Awesome icons are valid just enter the name of the icon without <em>fa-</em>.</p></li>
<li><p><strong>show_value</strong> (<code class="docutils literal notranslate"><span class="pre">bool</span></code>) – Show the numeric value and unit.</p></li>
<li><p><strong>label</strong> (<code class="docutils literal notranslate"><span class="pre">str</span></code>) – Label to show default is the name of the sensor.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kervi.sensors.Sensor.log_values">
<em class="property">property </em><code class="sig-name descname">log_values</code><a class="headerlink" href="#kervi.sensors.Sensor.log_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Set to true if the values should be logged to DB.
If false Kervi will hold a small cache in memory
for the last reading to be used in sparklines and real time charts.</p>
</dd></dl>

<dl class="method">
<dt id="kervi.sensors.Sensor.max">
<em class="property">property </em><code class="sig-name descname">max</code><a class="headerlink" href="#kervi.sensors.Sensor.max" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum value.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kervi.sensors.Sensor.min">
<em class="property">property </em><code class="sig-name descname">min</code><a class="headerlink" href="#kervi.sensors.Sensor.min" title="Permalink to this definition">¶</a></dt>
<dd><p>Minimum value.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kervi.sensors.Sensor.polling_interval">
<em class="property">property </em><code class="sig-name descname">polling_interval</code><a class="headerlink" href="#kervi.sensors.Sensor.polling_interval" title="Permalink to this definition">¶</a></dt>
<dd><p>The polling interval of the sensor in seconds.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kervi.sensors.Sensor.reading_interval">
<em class="property">property </em><code class="sig-name descname">reading_interval</code><a class="headerlink" href="#kervi.sensors.Sensor.reading_interval" title="Permalink to this definition">¶</a></dt>
<dd><p>The polling interval of the sensor in seconds.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kervi.sensors.Sensor.unit">
<em class="property">property </em><code class="sig-name descname">unit</code><a class="headerlink" href="#kervi.sensors.Sensor.unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Metric Unit of value.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="display_api.html" class="btn btn-neutral float-right" title="Display api" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="values_api.html" class="btn btn-neutral float-left" title="Kervi values api" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Tim Wentzlau

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function () {
    cookieconsent.run({"notice_banner_type":"headline","consent_type":"express","palette":"dark","change_preferences_selector":"#changePreferences","language":"en"});
});
</script>

<script cookie-consent="tracking" async src="https://www.googletagmanager.com/gtag/js?id=UA-144183988-1"></script>
<script cookie-consent="tracking">
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-144183988-1');
</script>



</body>
</html>