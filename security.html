

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Security &mdash; Kervi 0.11.1 - beta documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Kervi 0.11.1 - beta documentation" href="index.html"/>
        <link rel="next" title="Hardware and devices" href="hal.html"/>
        <link rel="prev" title="Camera api" href="camera_api.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Kervi
          

          
          </a>

          
            
            
              <div class="version">
                0.11.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getstarted.html">Get started</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboards.html">Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensors.html">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensors_api.html">Sensors API</a></li>
<li class="toctree-l1"><a class="reference internal" href="controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamic_values.html">Dynamic values</a></li>
<li class="toctree-l1"><a class="reference internal" href="camera.html">Camera and video</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Security</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#users">Users</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#anonymous-access">Anonymous access</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#encryption">Encryption</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hal.html">Hardware and devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipc.html">Component communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Commandline tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Kervi</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Security</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="security">
<h1>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h1>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">*</span><span class="n">Notice</span><span class="o">*</span><span class="p">:</span>

<span class="n">The</span> <span class="n">security</span> <span class="n">features</span> <span class="n">of</span> <span class="n">the</span> <span class="n">Kervi</span> <span class="n">framework</span> <span class="n">has</span> <span class="ow">not</span> <span class="n">been</span> <span class="n">reviewed</span> <span class="n">by</span> <span class="nb">any</span> <span class="n">external</span> <span class="n">experts</span> <span class="ow">and</span>
<span class="n">use</span> <span class="ow">is</span> <span class="n">at</span> <span class="n">own</span> <span class="n">risk</span><span class="o">.</span>

<span class="n">Exposing</span> <span class="n">your</span> <span class="n">Kervi</span> <span class="n">application</span> <span class="n">directly</span> <span class="n">on</span> <span class="n">the</span> <span class="n">internet</span> <span class="n">by</span> <span class="n">routing</span> <span class="n">traffic</span> <span class="kn">from</span> <span class="nn">internet</span> <span class="n">router</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Kervi</span> <span class="n">web</span> <span class="n">server</span>
<span class="ow">is</span> <span class="n">strongly</span> <span class="n">adviced</span> <span class="n">against</span> <span class="n">at</span> <span class="n">the</span> <span class="n">moment</span><span class="o">.</span>

<span class="n">At</span> <span class="n">this</span> <span class="n">moment</span> <span class="n">of</span> <span class="n">development</span> <span class="n">passwords</span> <span class="ow">and</span> <span class="n">user</span> <span class="n">names</span> <span class="n">are</span> <span class="n">send</span> <span class="ow">in</span> <span class="n">clear</span> <span class="n">text</span> <span class="n">between</span> <span class="n">browser</span> <span class="ow">and</span> <span class="n">Kervi</span> <span class="n">web</span> <span class="n">server</span>
<span class="n">unless</span> <span class="n">you</span> <span class="n">enable</span> <span class="n">TLS</span> <span class="n">encryption</span><span class="o">.</span>
</pre></div>
</div>
<p>It is possible to secure your Kervi application with user authentication and encrypted communication between browser
and the kervi web server.</p>
<div class="section" id="users">
<h2>Users<a class="headerlink" href="#users" title="Permalink to this headline">¶</a></h2>
<p>When a kervi application starts it looks for at file named users.py with the following format:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">settings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;tim&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;password&quot;</span><span class="p">:</span><span class="s2">&quot;1234&quot;</span><span class="p">,</span>
        <span class="s2">&quot;groups&quot;</span><span class="p">:[</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;group1&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;test&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;password&quot;</span><span class="p">:</span><span class="s2">&quot;4321&quot;</span><span class="p">,</span>
        <span class="s2">&quot;groups&quot;</span><span class="p">:[</span><span class="s2">&quot;group2&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As seen above each user is defined whit the user name as key in the settings dictionary and
the password and groups as parameters for each user.</p>
<p>You can use the groups in your python code to define who has access to panels and dynamcic values.</p>
<p>I the snippet below the cpu sensor is only visible for users who belongs to the admin group</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">CPU_SENSOR</span> <span class="o">=</span> <span class="n">Sensor</span><span class="p">(</span><span class="s2">&quot;CPULoadSensor&quot;</span><span class="p">,</span><span class="s2">&quot;CPU&quot;</span><span class="p">,</span> <span class="n">CPULoadSensorDeviceDriver</span><span class="p">())</span>
<span class="n">CPU_SENSOR</span><span class="o">.</span><span class="n">user_groups</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;admin&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>In the same way dashboards and panels may be restricted to certain groups as shown below.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">SYSTEM_DASHBOARD</span> <span class="o">=</span> <span class="n">Dashboard</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;System&quot;</span><span class="p">)</span>
<span class="n">SYSTEM_DASHBOARD</span><span class="o">.</span><span class="n">user_groups</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;admins&quot;</span><span class="p">,</span> <span class="s2">&quot;users&quot;</span><span class="p">]</span>

<span class="n">POWER_PANEL</span> <span class="o">=</span> <span class="n">DashboardPanel</span><span class="p">(</span><span class="s2">&quot;power&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Power&quot;</span><span class="p">)</span>
<span class="n">POWER_PANEL</span><span class="o">.</span><span class="n">user_groups</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;admins&quot;</span><span class="p">]</span>
<span class="n">SYSTEM_DASHBOARD</span><span class="o">.</span><span class="n">add_panel</span><span class="p">(</span><span class="n">POWER_PANEL</span><span class="p">)</span>
</pre></div>
</div>
<p>In the snippet above users that is member of the groups admins or users have access to the system dashboard
but it is only members in the admins groups that can see the power panel.</p>
<div class="section" id="anonymous-access">
<h3>Anonymous access<a class="headerlink" href="#anonymous-access" title="Permalink to this headline">¶</a></h3>
<p>If no anonymous user is defined in the users.py file the web user will be prompted with a log in screen when accessing the UI.
To enable anonymous access a the anonymous user to the users.py file</p>
<blockquote>
<div></div></blockquote>
<p>Now the web ui will try to login as anonymous user when the users go to the UI web page.
All components that does not have the property user_groups set will be visible to the anonymous user.
In addition components that belongs to any user groups specified for the anonymous user will be visible too.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">*</span><span class="n">Note</span><span class="p">:</span><span class="o">*</span> <span class="n">authentication</span> <span class="n">only</span> <span class="n">apply</span> <span class="n">to</span> <span class="n">the</span> <span class="n">web</span> <span class="n">users</span><span class="o">.</span>
<span class="n">Internal</span> <span class="n">communication</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">kervi</span> <span class="n">applications</span> <span class="n">python</span> <span class="n">code</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">affected</span> <span class="n">by</span> <span class="n">user</span> <span class="n">authentication</span><span class="o">.</span>
<span class="n">All</span> <span class="n">components</span> <span class="n">can</span> <span class="n">query</span> <span class="ow">and</span> <span class="n">command</span> <span class="n">each</span> <span class="n">other</span> <span class="n">plus</span> <span class="n">receive</span> <span class="n">events</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="encryption">
<h2>Encryption<a class="headerlink" href="#encryption" title="Permalink to this headline">¶</a></h2>
<p>To encrypt communication between browser and Kervi web server a certificate is needed.
The Kervi web server looks for the file encryption.py upon start up.
If the file is present the settings in file is used to secure the communication between browser and kervi server.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">settings</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;useSSL&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="c1"># enables or disables encryption</span>
    <span class="s2">&quot;certFile&quot;</span><span class="p">:</span> <span class="s2">&quot;kervi.cert&quot;</span><span class="p">,</span>
    <span class="s2">&quot;keyFile&quot;</span><span class="p">:</span> <span class="s2">&quot;kervi.key&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="hal.html" class="btn btn-neutral float-right" title="Hardware and devices" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="camera_api.html" class="btn btn-neutral" title="Camera api" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Tim Wentzlau.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.11.1 - beta',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>