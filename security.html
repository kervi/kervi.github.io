

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Security</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="" href="index.html"/>
        <link rel="next" title="Hardware and devices" href="hal.html"/>
        <link rel="prev" title="Configuration" href="configuration.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Kervi
          

          
          </a>

          
            
            
              <div class="version">
                0.20.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getstarted/index.html">Get started</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboards.html">Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensors.html">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="signals.html">Signal handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="actions.html">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="camera.html">Camera and video</a></li>
<li class="toctree-l1"><a class="reference internal" href="motors.html">Motors</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpio.html">GPIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="display.html">Displays</a></li>
<li class="toctree-l1"><a class="reference internal" href="messaging.html">Messaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Security</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#simple-user-management">Simple user management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#anonymous-access">Anonymous access</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#encryption">Encryption</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hal.html">Hardware and devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="devices/index.html">Device library</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_process.html">Process distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributed.html">Distributed applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="service.html">Run as service</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Commandline tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipc.html">Interprocess communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="kervi_api.html">Kervi API</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Kervi</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Security</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="security">
<h1>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>The security features of the Kervi framework has not been reviewed by any external experts and
use is at own risk.</p>
<p>Exposing your Kervi application directly on the internet by routing traffic from internet router to the Kervi web server
is strongly advised against at the moment.</p>
<p class="last">At this moment of development passwords and user names are sent in clear text between browser and Kervi web server
unless you enable TLS encryption (see below).</p>
</div>
<p>It is possible to secure your Kervi application with user authentication and encrypted communication between browser
and the kervi web server.</p>
<p>User access in the ui is controlled via <a class="reference internal" href="configuration.html#configuration"><span class="std std-ref">Kervi configuration</span></a> in the plugins/authentication section</p>
<div class="section" id="simple-user-management">
<h2>Simple user management<a class="headerlink" href="#simple-user-management" title="Permalink to this headline">¶</a></h2>
<p>Kervi comes with a simple authentication plugin where users are defined in config.
You enable this plugin by setting kervi.plugin.authentication.plain to true.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;plugins&quot;</span><span class="p">:{</span>
    <span class="s2">&quot;authentication&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;kervi.plugin.authentication.plain&quot;</span><span class="p">:</span> <span class="kc">True</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>This plugin looks for uses in the plain_users section.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;plain_users&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;anonymous&quot;</span><span class="p">:{</span>
            <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;groups&quot;</span><span class="p">:[]</span>
        <span class="p">},</span>
        <span class="s2">&quot;admin&quot;</span><span class="p">:{</span>
            <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;password&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;groups&quot;</span><span class="p">:[</span><span class="s2">&quot;admin&quot;</span><span class="p">],</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Administrator&quot;</span><span class="p">,</span>
            <span class="s2">&quot;addresses&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;admin@example.com&quot;</span><span class="p">,</span>
                <span class="s2">&quot;phone&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>As seen above each user is defined whit the user name as key in the configuration section and
the password and groups as parameters for each user.</p>
<p>You can use the groups in your python code to define who has access to dashboards, panels and sensors.</p>
<p>In the snippet below the cpu sensor is only visible to users who belong to the admin group</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">CPU_SENSOR</span> <span class="o">=</span> <span class="n">Sensor</span><span class="p">(</span><span class="s2">&quot;CPULoadSensor&quot;</span><span class="p">,</span><span class="s2">&quot;CPU&quot;</span><span class="p">,</span> <span class="n">CPULoadSensorDeviceDriver</span><span class="p">(),</span> <span class="n">user_groups</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;admin&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>In the same way dashboards and panels may be restricted to certain groups as shown below.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">Dashboard</span><span class="p">(</span>
    <span class="s2">&quot;system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;System&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="n">DashboardPanel</span><span class="p">(</span><span class="s2">&quot;power&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Power&quot;</span><span class="p">,</span> <span class="n">user_groups</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;admins&quot;</span><span class="p">])</span>
    <span class="p">],</span>
    <span class="n">user_groups</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;admins&quot;</span><span class="p">,</span> <span class="s2">&quot;users&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>In the snippet above users that is member of the groups <em>admins</em> or <em>users</em> have access to the system dashboard
but it is only members in the <em>admins</em> groups that can see the power panel.</p>
<div class="section" id="anonymous-access">
<h3>Anonymous access<a class="headerlink" href="#anonymous-access" title="Permalink to this headline">¶</a></h3>
<p>Anonymous access is controlled via the anonymous user in the plain_users configuration section.</p>
<blockquote>
<div><div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;plain_users&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;anonymous&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">True</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>The web user will be prompted with a login screen when accessing the UI if anonymous access is disabled.
If anonymous access is enabled the web ui will try to login as anonymous user when the users go to the UI web page.
All components that does not have the property user_groups set will be visible to the anonymous user.
In addition, components that belongs to any user groups specified for the anonymous user will be visible too.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Authentication only apply to the web users.
Internal communication in the kervi applications python code is not affected by user authentication.
All components can query and command each other plus receive events.</p>
</div>
</div>
</div>
<div class="section" id="encryption">
<h2>Encryption<a class="headerlink" href="#encryption" title="Permalink to this headline">¶</a></h2>
<p>To encrypt communication between browser and Kervi web server a certificate is needed.
Encryption is enabled via <a class="reference internal" href="configuration.html#configuration"><span class="std std-ref">Kervi configuration</span></a> in the encryption section.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;encryption&quot;</span><span class="p">:{</span>
    <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;use_ssl&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;cert_file&quot;</span><span class="p">:</span> <span class="s2">&quot;path to cert file&quot;</span><span class="p">,</span>
    <span class="s2">&quot;key_file&quot;</span><span class="p">:</span>  <span class="s2">&quot;path to key file&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="hal.html" class="btn btn-neutral float-right" title="Hardware and devices" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="configuration.html" class="btn btn-neutral" title="Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Tim Wentzlau.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>