

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Displays</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="" href="index.html"/>
        <link rel="next" title="Messaging" href="messaging.html"/>
        <link rel="prev" title="GPIO" href="gpio.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Kervi
          

          
          </a>

          
            
            
              <div class="version">
                0.20.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getstarted/index.html">Get started</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboards.html">Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensors.html">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="signals.html">Signal handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="actions.html">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="camera.html">Camera and video</a></li>
<li class="toctree-l1"><a class="reference internal" href="motors.html">Motors</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpio.html">GPIO</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Displays</a></li>
<li class="toctree-l1"><a class="reference internal" href="messaging.html">Messaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="hal.html">Hardware and devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="devices/index.html">Device library</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_process.html">Process distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributed.html">Distributed applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="service.html">Run as service</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Commandline tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipc.html">Interprocess communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="kervi_api.html">Kervi API</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Kervi</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Displays</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="displays">
<h1>Displays<a class="headerlink" href="#displays" title="Permalink to this headline">Â¶</a></h1>
<p>Kervi has support for displaying text and values on displays.
This is handled via the Display class.
The Display class recognize the type of the connected display and handles the differences independently.
This makes it easy to change the display driver with very few changes to the code.</p>
<p>The Display class also supports text templates where it is possible to specify and link sensors and other kervi values.</p>
<p>Below is an example that show how to connect a display to a text box in the web ui.
Any text that is entered in the text box is displayed in the display.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kervi.application</span> <span class="k">import</span> <span class="n">Application</span>
<span class="n">APP</span> <span class="o">=</span> <span class="n">Application</span><span class="p">()</span>

<span class="kn">from</span> <span class="nn">kervi.displays</span> <span class="k">import</span> <span class="n">Display</span>
<span class="kn">from</span> <span class="nn">kervi.devices.displays.SSD1306</span> <span class="k">import</span> <span class="n">SSD1306DeviceDriver</span>

<span class="n">display</span> <span class="o">=</span> <span class="n">Display</span><span class="p">(</span><span class="s2">&quot;d1&quot;</span><span class="p">,</span> <span class="s2">&quot;Display&quot;</span><span class="p">,</span> <span class="n">SSD1306DeviceDriver</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">32</span><span class="p">))</span>
<span class="n">display</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">link_to_dashboard</span><span class="p">()</span>

<span class="n">APP</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>Below is an example where cpu load and temp is displayed dynamically.
This is done via DisplayPages.
A DisplayPage holds an text template and dynamic links to values that should be displayed.
When the values of the linked values changes the display is updated.</p>
<p>A display can have multiple DisplayPages and cycle thru them on time interval or via change_page action.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kervi.application</span> <span class="k">import</span> <span class="n">Application</span>
<span class="n">APP</span> <span class="o">=</span> <span class="n">Application</span><span class="p">()</span>


<span class="kn">from</span> <span class="nn">kervi.sensors</span> <span class="k">import</span> <span class="n">Sensor</span>
<span class="kn">from</span> <span class="nn">kervi.devices.sensors.system</span> <span class="k">import</span> <span class="n">CPULoadSensorDeviceDriver</span>
<span class="kn">from</span> <span class="nn">kervi.devices.sensors.system</span> <span class="k">import</span> <span class="n">CPUTempSensorDeviceDriver</span>

<span class="c1">#build in sensor that measures cpu use</span>
<span class="n">SENSOR_CPU_LOAD</span> <span class="o">=</span> <span class="n">Sensor</span><span class="p">(</span><span class="s2">&quot;CPULoadSensor&quot;</span><span class="p">,</span> <span class="s2">&quot;CPU&quot;</span><span class="p">,</span> <span class="n">CPULoadSensorDeviceDriver</span><span class="p">())</span>

<span class="c1">#build in sensor that measures cpu temperature</span>
<span class="n">SENSOR_CPU_TEMP</span> <span class="o">=</span> <span class="n">Sensor</span><span class="p">(</span><span class="s2">&quot;CPUTempSensor&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">CPUTempSensorDeviceDriver</span><span class="p">())</span>

<span class="kn">from</span> <span class="nn">kervi.displays</span> <span class="k">import</span> <span class="n">Display</span><span class="p">,</span> <span class="n">DisplayPage</span>
<span class="kn">from</span> <span class="nn">kervi.devices.displays.SSD1306</span> <span class="k">import</span> <span class="n">SSD1306DeviceDriver</span>

<span class="c1">#create a display page</span>
<span class="n">cpu_page</span> <span class="o">=</span> <span class="n">DisplayPage</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">)</span>
<span class="n">cpu_page</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;CPU : </span><span class="si">{CPULoadSensor}</span><span class="s2">%</span><span class="se">\n</span><span class="s2">temp: </span><span class="si">{CPUTempSensor}</span><span class="s2"> </span><span class="se">\u00B0</span><span class="s2">C&quot;</span>
<span class="c1">#link values and enter value text format</span>
<span class="n">cpu_page</span><span class="o">.</span><span class="n">link_value</span><span class="p">(</span><span class="n">SENSOR_CPU_LOAD</span><span class="p">,</span> <span class="s2">&quot;2.0f&quot;</span><span class="p">)</span>
<span class="n">cpu_page</span><span class="o">.</span><span class="n">link_value</span><span class="p">(</span><span class="n">SENSOR_CPU_TEMP</span><span class="p">,</span> <span class="s2">&quot;2.0f&quot;</span><span class="p">)</span>

<span class="n">display</span> <span class="o">=</span> <span class="n">Display</span><span class="p">(</span><span class="s2">&quot;d1&quot;</span><span class="p">,</span> <span class="s2">&quot;Display&quot;</span><span class="p">,</span> <span class="n">SSD1306DeviceDriver</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">32</span><span class="p">))</span>
<span class="n">display</span><span class="o">.</span><span class="n">add_page</span><span class="p">(</span><span class="n">cpu_page</span><span class="p">)</span>

<span class="n">APP</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="messaging.html" class="btn btn-neutral float-right" title="Messaging" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gpio.html" class="btn btn-neutral" title="GPIO" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Tim Wentzlau.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>